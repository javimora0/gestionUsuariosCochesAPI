(()=>{"use strict";class t{constructor(t,e,o,n){this.dni=t,this.nombre=e,this.tfno=o,this.edad=n}}const e=document.getElementById("tablaUsuarios"),o=document.getElementById("insertarUsuario"),n=document.getElementById("eliminarUsuario"),a=document.getElementById("mensajeBorrado"),r=document.getElementById("mensaje");var c=[];async function s(){try{const o=await async function(){try{const t="http://localhost:8000/api/usuarios",e=await fetch(t);if(!e.ok)throw console.log(e),new Error("No se pudo obtener la información de las categorias");return await e.json()}catch(t){console.error(t)}}();c=function(e){return e[1].forEach((e=>{let o=new t(e.dni,e.nombre,e.tfno,e.edad);c.push(o)})),c}(o),function(t){let o=[];t.forEach((function(t){o.push(t)})),o.forEach((function(t){let o=document.createElement("tr");o.innerHTML=`\n            <td>${t.dni}</td>\n            <td>${t.nombre}</td>\n            <td>${t.tfno}</td>\n            <td>${t.edad}</td>\n        `,e.appendChild(o)}))}(c)}catch(t){console.log(t)}}s(),o.addEventListener("click",(function(){let o=document.getElementById("dniUsuario").value,n=document.getElementById("nombreUsuario").value,a=document.getElementById("tfnoUsuario").value,i=document.getElementById("edadUsuario").value;!async function(t){try{const o=await async function(t){try{let e={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}};const o="http://localhost:8000/api/usuarios",n=await fetch(o,e);if(!n.ok)throw console.log(n),new Error("No se pudo obtener la información de las categorias");return await n.json()}catch(t){console.error(t)}}(t);!function(t){"Registro insertado correctamente"==t.mensaje?(r.textContent="Usuario insertado correctamente",function(){for(let t=e.rows.length-1;t>0;t--)e.deleteRow(t)}(),c.splice(0,c.length),s()):r.textContent="Error al insertar usuario"}(o)}catch(t){console.log(t)}}(new t(o,n,a,i))})),n.addEventListener("click",(function(){!async function(t){try{e=(await async function(t){try{let e={method:"DELETE",headers:{"Content-Type":"application/json"}};const o="http://localhost:8000/api/usuarios/"+t,n=await fetch(o,e);if(!n.ok)throw console.log(n),new Error("No se pudo obtener la información de las categorias");return await n.json()}catch(t){console.error(t)}}(t))["Registros borrados"],a.textContent=0==e?"Usuario no encontrado":"Usuario borrado"}catch(t){}var e}(document.getElementById("dniUsuarioBorrado").value)}))})();
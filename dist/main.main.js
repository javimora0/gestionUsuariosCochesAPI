(()=>{"use strict";class t{constructor(t,e,n,o){this.dni=t,this.nombre=e,this.tfno=n,this.edad=o}}const e=document.getElementById("tablaUsuarios"),n=document.getElementById("insertarUsuario");var o=[];async function a(){try{const n=await async function(){try{const t="http://localhost:8000/api/usuarios",e=await fetch(t);if(!e.ok)throw console.log(e),new Error("No se pudo obtener la información de las categorias");return await e.json()}catch(t){console.error(t)}}();o=function(e){return e[1].forEach((e=>{let n=new t(e.dni,e.nombre,e.tfno,e.edad);o.push(n)})),o}(n),function(t){let n=[];t.forEach((function(t){n.push(t)})),n.forEach((function(t){let n=document.createElement("tr");n.innerHTML=`\n            <td>${t.dni}</td>\n            <td>${t.nombre}</td>\n            <td>${t.tfno}</td>\n            <td>${t.edad}</td>\n        `,e.appendChild(n)}))}(o)}catch(t){console.log(t)}}a(),n.addEventListener("click",(function(){let n=document.getElementById("dniUsuario").value,r=document.getElementById("nombreUsuario").value,c=document.getElementById("tfnoUsuario").value,s=document.getElementById("edadUsuario").value;!async function(t){try{const n=await async function(t){try{let e={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}};const n="http://localhost:8000/api/usuarios",o=await fetch(n,e);if(!o.ok)throw console.log(o),new Error("No se pudo obtener la información de las categorias");return await o.json()}catch(t){console.error(t)}}(t);!function(t){let n=document.getElementById("mensaje");"Registro insertado correctamente"==t.mensaje?(n.textContent="Usuario insertado correctamente",function(){for(let t=e.rows.length-1;t>0;t--)e.deleteRow(t)}(),o.splice(0,o.length),a()):n.textContent="Error al insertar usuario"}(n)}catch(t){console.log(t)}}(new t(n,r,c,s))}))})();